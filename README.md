# Protocols-practice-tracert
## Задача
Трассировка автономных систем. Пользователь вводит доменное имя
или IP адрес. Осуществляется трассировка до указанного узла (например, с использованием
tracert), т. е. мы узнаем IP адреса маршрутизаторов, через которые проходит пакет. Необходимо определить к какой автономной системе относится каждый из полученных IP адресов маршрутизаторов. Для определения номеров автономных систем обращаться к базам данных
региональных интернет регистраторов.
## Реализация
По заданному Ip или имени сайта программа выдает таблицу всех маршрутизаторов через которые осуществлялась трассировка.
Каждая запись содержит автономную систему к которой относится ip, а также страна и провайдер.
Этапы трассировки на которых результатом было **** игнорируются.

## Запуск
Для запуска требуются
* Python версии 3.10 и выше
* Установленные библиотеки из файла requirements.txt

Запуск происходит через терминал, в следующем формате `python tracer.py [ip/site name]`

## Реализация
Трассировка происходит через команду tracert командной строки

Для некорректных ip программа не выполняется, для корректных происходит следующее

Результат парсится и выделяются ip адреса(через ip_regex), строки вида **** игнорируются

Массив адресов проходит через метод getIpInfo
### Получение данных по Ip
Сначала проверяется является ли адрес серым, реализуется через функцию isGray
Отбрасываются адреса вида "192.168...", "10....", "172...." такие что второй октет лежит в диапазоне [15,32]

Для белых адресов будут получены данные через сайт https://www.nic.ru/whois

Существует проблема, причину которой я не смог понять, если безостановочно проверять все адреса, то в определенный момент, html страницы перестают нормально парситься, могу предположить что сервер начинает считать что я засыпаю его запросами, запросы после 5-6 перестают нормально парситься. Проблему я решил добавив время ожидания между каждым запросом, в результате время значительно увеличилось, но парситься стали все ссылки

С помощью соответсвующих парсеров, выделяются AS, страна и провайдер(так как на сайте представление различается для .ru и зарубежных доменов, то регекса 2)

Для серых адресов все эти поля пустые, я обозначил их через Gray в итоговой таблице

Результаты записываются в таблицу, которая затем выводится на экран
## Дополнительно
Результаты для google.com и yandex.ru находятся в файле tables.txt
